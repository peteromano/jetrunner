<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: drivers/client.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: drivers/client.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/** @module drivers/client */

'use strict';

var url         = require('url'),
    qs          = require('querystring'),
    JetRunner   = require('../'),
    util        = require('../util');

/**
 * @abstract
 */
function Client() {}

Client.prototype = util.createEventEmitter({

    name: 'generic',

    /**
     * @param tests
     * @param config
     */
    initialize: function(tests, config) {
        this.tests = [].concat(tests);
        this.config = config || {};

        return

            this.on('complete', function(err) {
                JetRunner.emit('complete', err);
            })

            this.on('success', function(yay) {
                JetRunner.emit('success', yay);
            })
            
            this.on('failure', function(err) {
                JetRunner.emit('failure', err);
            });
    },

    /**
     * @abstract
     */
    run: function() {},

    getTestURL: function(test) {
        var tests = this.tests, config = this.config;

        return url.format({
            protocol: config.secure ? 'https' : 'http',
            port: config.client.port || config.port,
            hostname: config.client.domain,
            pathname: '/',
            query: {
                test:   Client.getTestPath(tests, test),
                src:    Client.getSrcPath(tests, test)
            }
        });
    }

});

/**
 * @static
 * @param tests
 * @param test
 * @returns {*}
 */
Client.getTestPath = function(tests, test) {
    return typeof tests[test] !== 'string' ? Object.keys(typeof test === 'string' ? tests[test] : test)[0] : tests[test];
};

/**
 * @static
 * @param tests
 * @param test
 * @returns {boolean|*|string}
 */
Client.getSrcPath = function(tests, test) {
    return typeof tests[test] !== 'string' && (test = typeof test === 'string' ? tests[test] : test)[Object.keys(test)[0]] || '';
};

/**
 * @static
 * @param test
 */
Client.getTestPathFromURL = function(test) {
    return qs.parse(url.parse(test).query).test
};

/**
 * @static
 * @type {{PASS: number, FAIL: number}}
 */
Client.TestStatusEnum = {
    PASS:   0,
    FAIL:   1
};

/**
 * @static
 * @type {{SUCCESS: string, FAILURE: string}}
 */
Client.IndicatorsEnum = {
    SUCCESS:    '✓ OK'.green,
    FAILURE:    '✕ FAILED!'.red
};

module.exports = Client;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-cli.html">cli</a></li><li><a href="module-config.html">config</a></li><li><a href="browserstack.html">drivers/browserstack</a></li><li><a href="client.html">drivers/client</a></li><li><a href="phantomjs.html">drivers/phantomjs</a></li><li><a href="saucelabs.html">drivers/saucelabs</a></li><li><a href="tunnel_client.html">drivers/tunnel_client</a></li><li><a href="module-index.html">index</a></li><li><a href="module-logger.html">logger</a></li><li><a href="module-run.html">run</a></li><li><a href="module-server.html">server</a></li><li><a href="module-util.html">util</a></li></ul><h3>Classes</h3><ul><li><a href="saucelabs-JetStream.html">JetStream</a></li><li><a href="saucelabs-SauceLabsClient.html">SauceLabsClient</a></li><li><a href="tunnel_client-TunnelClient.html">TunnelClient</a></li><li><a href="module-server-Server.html">Server</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Tue Apr 16 2013 15:02:55 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
